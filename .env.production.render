# ============================================================================
# RENDER PRODUCTION ENVIRONMENT VARIABLES
# Copy these to your Render Web Service ‚Üí Environment tab
# ============================================================================

# ============================================================================
# üî¥ CRITICAL - SET IMMEDIATELY (System won't start without these)
# ============================================================================

# Database (Copy from Render PostgreSQL ‚Üí Internal Database URL)
DATABASE_URL=postgresql://user:password@host:5432/angels_ai_school

# Authentication (Generate with: openssl rand -hex 32)
JWT_SECRET_KEY=GENERATE_WITH_openssl_rand_hex_32
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# Clarity AI Chatbot (Your API - Already configured!)
CLARITY_API_KEY=cp_live_demo_2024_clarity_pearl_ai_test_key_001
CLARITY_API_URL=https://veritas-engine-zae0.onrender.com

# App Settings
DEFAULT_BRAND_NAME=Angels AI School
API_BASE_URL=https://YOUR-RENDER-SERVICE.onrender.com
FRONTEND_URL=https://YOUR-FRONTEND.onrender.com


# ============================================================================
# üü° IMPORTANT - SET BEFORE REAL DATA (Security & Features)
# ============================================================================

# Data Encryption (Generate with Python - see below)
ENCRYPTION_KEY=GENERATE_WITH_python_cryptography_fernet

# Email Notifications (SendGrid - Free 100 emails/day)
# Sign up: https://sendgrid.com/free
SENDGRID_API_KEY=SG.your_sendgrid_api_key_here
SENDGRID_FROM_EMAIL=noreply@your-school-domain.com
SENDGRID_FROM_NAME=Angels AI School

# SMS Notifications - Africa's Talking (Recommended for Uganda)
# Sign up: https://africastalking.com
AFRICAS_TALKING_API_KEY=your_africas_talking_api_key
AFRICAS_TALKING_USERNAME=your_username

# OR Twilio SMS (Alternative - Free $15 trial)
# TWILIO_ACCOUNT_SID=your_twilio_account_sid
# TWILIO_AUTH_TOKEN=your_twilio_auth_token
# TWILIO_PHONE_NUMBER=+1234567890

# Web Push Notifications (Free - generate keys)
# Generate with: npm install -g web-push && web-push generate-vapid-keys
VAPID_PUBLIC_KEY=your_vapid_public_key
VAPID_PRIVATE_KEY=your_vapid_private_key
VAPID_SUBJECT=mailto:admin@your-school-domain.com


# ============================================================================
# üí∞ PAYMENT GATEWAYS (Set when ready for fee collection)
# ============================================================================

# MTN Mobile Money Uganda
# Apply: https://momodeveloper.mtn.com/
MTN_MOMO_API_KEY=your_mtn_momo_api_key
MTN_MOMO_USER_ID=your_mtn_user_id
MTN_MOMO_SUBSCRIPTION_KEY=your_subscription_key
MTN_MOMO_ENVIRONMENT=sandbox  # Change to 'production' when ready

# Airtel Money Uganda
# Apply: https://developers.airtel.africa/
AIRTEL_MONEY_API_KEY=your_airtel_money_api_key
AIRTEL_MONEY_CLIENT_ID=your_client_id
AIRTEL_MONEY_CLIENT_SECRET=your_client_secret
AIRTEL_MONEY_ENVIRONMENT=sandbox  # Change to 'production' when ready


# ============================================================================
# üì∏ OCR (Photo-based Data Entry)
# ============================================================================

# Google Cloud Vision API (Free 1000 requests/month)
# Setup: https://cloud.google.com/vision/docs/setup
# Create service account and download JSON key
GOOGLE_APPLICATION_CREDENTIALS_JSON={"type":"service_account","project_id":"your-project-id","private_key_id":"...","private_key":"...","client_email":"..."}

# OR if using file upload
# GOOGLE_CLOUD_PROJECT_ID=your-project-id
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json


# ============================================================================
# üìä MONITORING & LOGGING (Optional but recommended)
# ============================================================================

# Sentry Error Tracking (Free 5000 errors/month)
# Sign up: https://sentry.io/signup/
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1

# Logging
LOG_LEVEL=INFO  # DEBUG for development, INFO for production


# ============================================================================
# üåê MULTI-LLM FALLBACKS (Optional - you mentioned having these)
# ============================================================================

# Anthropic Claude API (Fallback to Clarity)
# ANTHROPIC_API_KEY=your_anthropic_api_key

# Google Gemini API (Fallback to Clarity)
# GEMINI_API_KEY=your_gemini_api_key

# Groq API (Fallback to Clarity)
# GROQ_API_KEY=your_groq_api_key

# OpenAI API (Fallback to Clarity)
# OPENAI_API_KEY=your_openai_api_key


# ============================================================================
# üîß ADVANCED (Optional)
# ============================================================================

# Database Connection Pool
DB_POOL_MIN_CONNECTIONS=2
DB_POOL_MAX_CONNECTIONS=20

# API Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# Session Management
SESSION_EXPIRE_HOURS=24

# File Upload Limits
MAX_UPLOAD_SIZE_MB=10

# CORS Settings (if frontend on different domain)
CORS_ORIGINS=https://your-frontend.onrender.com,https://your-custom-domain.com


# ============================================================================
# üöÄ RENDER-SPECIFIC (Auto-set by Render)
# ============================================================================

# These are set automatically by Render - don't add manually
# PORT=10000
# RENDER=true
# RENDER_EXTERNAL_URL=https://your-service.onrender.com
# RENDER_GIT_COMMIT=abc123
# RENDER_GIT_BRANCH=main


# ============================================================================
# üìù HOW TO GENERATE KEYS
# ============================================================================

# JWT Secret Key:
# openssl rand -hex 32

# Encryption Key:
# python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

# VAPID Keys (Web Push):
# npm install -g web-push
# web-push generate-vapid-keys


# ============================================================================
# üí∞ COST SUMMARY (Free Tiers)
# ============================================================================

# SendGrid: 100 emails/day = FREE
# Africa's Talking: Sandbox = FREE
# Google Cloud Vision: 1000 requests/month = FREE
# Sentry: 5000 errors/month = FREE
# Render Database Starter: $7/month
# Render Web Service Starter: $7/month
# TOTAL: $14/month for production-ready A/B testing


# ============================================================================
# ‚úÖ DEPLOYMENT CHECKLIST
# ============================================================================

# 1. [ ] Create PostgreSQL database on Render
# 2. [ ] Copy DATABASE_URL from Render
# 3. [ ] Generate JWT_SECRET_KEY
# 4. [ ] Generate ENCRYPTION_KEY
# 5. [ ] Sign up for SendGrid (free)
# 6. [ ] Sign up for Africa's Talking (sandbox)
# 7. [ ] Generate VAPID keys
# 8. [ ] Setup Google Cloud Vision (free tier)
# 9. [ ] Apply for MTN MoMo sandbox (or use test mode)
# 10. [ ] Apply for Airtel Money sandbox (or use test mode)
# 11. [ ] Copy all variables to Render Environment tab
# 12. [ ] Deploy web service
# 13. [ ] Run migrations (python run_migrations.py)
# 14. [ ] Test /api/health endpoint
# 15. [ ] Start A/B testing!


# ============================================================================
# üÜò TROUBLESHOOTING
# ============================================================================

# If deployment fails:
# 1. Check Render logs: render logs -s YOUR-SERVICE-NAME
# 2. Verify all CRITICAL variables are set
# 3. Ensure DATABASE_URL is the INTERNAL URL (not external)
# 4. Run migrations manually if needed
# 5. Check health endpoint: curl https://YOUR-SERVICE.onrender.com/api/health

# If OCR fails:
# - Verify GOOGLE_APPLICATION_CREDENTIALS_JSON is valid JSON
# - Check Google Cloud Vision API is enabled
# - Ensure free tier quota not exceeded

# If payments fail:
# - Use sandbox/test mode first
# - Verify API keys are for correct environment
# - Check Mobile Money provider status page
